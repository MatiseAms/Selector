$.fn.Selector=function(e){console.log("Selector: #"+$(this).attr("id")+" initialized");var t,n,o,i,c={},l={},a=$(this),s=$.extend({clickToOpen:!1,setActiveOnClick:!0,checkedClass:"checked",setOrder:!0,transitionTime:300,valueAttr:"data-value",arrows:300,onSelectorChange:!1,onActiveChange:!1,onCheckedChange:!1},e);c.goToUrl=function(e){setTimeout(function(){e.attr("href").length()>0?window.location.href=e.attr("href"):e.attr("data-url").length>0&&(window.location.href=e.attr("data-url"))},s.transitionTime)},c.scrollToSelected=function(e){var t=e.index(),n=t*e.outerHeight();a.animate({scrollTop:n},s.transitionTime),c.setSelected(a)},c.initSelector=function(e){t=e.outerHeight()/2;var n=e.find("li."+s.checkedClass);c.setActive(e,n),c.setChecked(e,n),l.top=t-n.outerHeight()/2,l.bottom=l.top,s.arrows,e.find("ul").css({"margin-top":l.top,"margin-bottom":l.bottom})},c.setSelected=function(e){e.find("li").each(function(){$(this).position().top<t&&$(this).position().top+$(this).outerHeight()>t&&!$(this).hasClass("checked")&&(n=$(this).index(),e.find("li").each(function(){$(this).removeClass("checked").attr("data-order",n-$(this).index())}),$(this).addClass("checked"),c.setChecked(e,$(this)))})},c.setChecked=function(e,t){e.attr("data-checked",t.attr(s.valueAttr)).triggerAll("checkedChange selectorChange")},c.setActive=function(e,t){e.attr("data-active",t.attr(s.valueAttr)).triggerAll("activeChange selectorChange")},c.keepArrowsInPlace=function(){o.css("top",t+i)},c.goToOption=function(e){console.log("somethingggg");var t;"up"===e?(console.log("up"),t=a.find("li."+s.checkedClass).index()-1):"down"===e?(console.log("down"),t=a.find("li."+s.checkedClass).index()+1):t=e,console.log(t),c.scrollToSelected(a.find("li:eq("+t+")"))},s.arrows&&(o=$("<div>").addClass("selector-arrows"),o.append($("<a>").addClass("selector-arrows-up").on("click",function(){c.goToOption("up")})),o.append($("<a>").addClass("selector-arrows-down").on("click",function(){c.goToOption("down")})),a.prepend(o)),s.clickToOpen||a.on("click","li",function(e){e.preventDefault(),c.scrollToSelected($(this))}),s.setActiveOnClick&&a.on("click","li a",function(e){$(this);c.setActive(a,$(this).parent()),c.scrollToSelected($(this).parent()),s.clickToOpen||e.preventDefault(),a.find(".active").each(function(){$(this).removeClass("active")}),el.addClass("active")}),c.isFunction=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},a.on("activeChange",function(){c.isFunction(s.onActiveChange)&&s.onActiveChange()}),a.on("checkedChange",function(){c.isFunction(s.onCheckedChange)&&s.onCheckedChange()}),a.on("selectorChange",function(){c.isFunction(s.onSelectorChange)&&s.onSelectorChange()}),$(document).ready(function(){c.initSelector(a),c.scrollToSelected(a.find("li."+s.activeClass)),s.arrows&&c.keepArrowsInPlace()}),a.mouseleave(function(){setTimeout(function(){c.scrollToSelected(a.find("li."+s.checkedClass))},200)}),a.scroll(function(){c.setSelected(a),i=a.scrollTop(),s.arrows&&c.keepArrowsInPlace()})},function(e){e.fn.extend({triggerAll:function(e,t){var n,o=this,i=e.split(" ");for(n=0;n<i.length;n+=1)o.trigger(i[n],t);return o}})}(jQuery);
