$.fn.Selector=function(e){var n,t,o,i,c={},a=$(this),r=!1,s=$.extend({clickToOpen:!1,setActiveOnClick:!0,checkedClass:"checked",setOrder:!0,transitionTime:300,valueAttr:"data-value",arrows:300,onSelectorChange:!1,onActiveChange:!1,onCheckedChange:!1,onGoTo:!1},e);return console.log(e),this.each(function(e,l){var h=function(e){if(s.init)var n=setInterval(function(){r?clearInterval(n):u()},1e3);s.arrows&&(o=$("<div>").addClass("selector-arrows"),o.append($("<a>").addClass("selector-arrows-up").on("click",function(){m("up")})),o.append($("<a>").addClass("selector-arrows-down").on("click",function(){m("down")})),a.prepend(o)),s.clickToOpen||a.on("click","li",function(e){e.preventDefault(),f($(this))}),s.setActiveOnClick&&a.on("click","li a",function(e){$(this);p(a,$(this).parent()),f($(this).parent()),s.clickToOpen||e.preventDefault(),a.find(".active").each(function(){$(this).removeClass("active")}),$(this).parent().addClass("active")}),a.on("activeChange",function(){d(s.onActiveChange)&&s.onActiveChange()}),a.on("checkedChange",function(){d(s.onCheckedChange)&&s.onCheckedChange()}),a.on("selectorChange",function(){d(s.onSelectorChange)&&s.onSelectorChange()}),a.on("selectorChange",function(){d(s.onSelectorChange)&&s.onSelectorChange()}),a.on("goTo",function(){d(s.onGoTo)&&console.log("hoi")}),a.mouseleave(function(){setTimeout(function(){f(a.find("li."+s.checkedClass))},200)}),a.scroll(function(){C(a),i=a.scrollTop(),s.arrows&&k()}),e&&"function"==typeof e&&e()},d=function(e){var n={};return e&&"[object Function]"===n.toString.call(e)},u=function(){r||(g(a),f(a.find("li."+s.activeClass)),s.arrows&&k(),console.log("Selector: #"+$(this).attr("id")+" initialized"),r=!0)},f=function(e){var n=e.index(),t=n*e.outerHeight();a.animate({scrollTop:t},s.transitionTime)},g=function(e){n=e.outerHeight()/2;var t=e.find("li."+s.checkedClass);p(e,t),v(e,t),c.top=n-t.outerHeight()/2,c.bottom=c.top,s.arrows,e.find("ul").css({"margin-top":c.top,"margin-bottom":c.bottom}),r=!0},C=function(e){e.find("li").each(function(){$(this).position().top<n&&$(this).position().top+$(this).outerHeight()>n&&!$(this).hasClass("checked")&&(t=$(this).index(),e.find("li").each(function(){$(this).removeClass("checked").attr("data-order",t-$(this).index())}),$(this).addClass("checked"),v(e,$(this)))})},v=function(e,n){e.attr("data-checked",n.attr(s.valueAttr)).triggerAll("checkedChange selectorChange")},p=function(e,n){e.attr("data-active",n.attr(s.valueAttr)).triggerAll("activeChange selectorChange")},k=function(){o.css("top",n+i)},m=function(e){var n;n="up"===e?a.find("li."+s.checkedClass).index()-1:"down"===e?a.find("li."+s.checkedClass).index()+1:e,f(a.find("li:eq("+n+")"))},w=function(e){f($(s.goto)),d(e)&&e()};s.init&&h(),s.goto&&w(s.goto)})},function(e){e.fn.extend({triggerAll:function(e,n){var t,o=this,i=e.split(" ");for(t=0;t<i.length;t+=1)o.trigger(i[t],n);return o}})}(jQuery);
